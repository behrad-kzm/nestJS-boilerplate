receivers:
  otlp:
    protocols:
      grpc:
      http:

processors:
  batch:

exporters:
  prometheus:
    resource_to_telemetry_conversion:
      enabled: true
    endpoint: "0.0.0.0:8889"
  otlp/jaeger:
    endpoint: "jaeger:4317"
    tls:
      insecure: true
service:
  pipelines:
    traces:
      receivers: [otlp]
      exporters: [otlp/jaeger]
    metrics:
      receivers: [otlp]
      exporters: [prometheus, otlp/jaeger]
    # logs: 
    #   receivers: [otlp]
    #   exporters: [elasticsearch/log]


# receivers:
#   jaeger:
#     protocols:
#       thrift_http:
#         endpoint: "0.0.0.0:14278"
#   # Dummy receiver that's never used, because a pipeline is required to have one.
#   otlp/spanmetrics:
#     protocols:
#       grpc:
#         endpoint: "localhost:65535"
# exporters:
#   prometheus:
#     endpoint: "0.0.0.0:8889"
#   jaeger:
#     endpoint: "jaeger:14250" # using the docker-compose name of the jaeger container
#     tls:
#       insecure: true
# processors:
#   batch:
#   spanmetrics:
#     metrics_exporter: prometheus
# service:
#   pipelines:
#     traces:
#       receivers: [jaeger]
#       processors: [spanmetrics, batch]
#       exporters: [jaeger]
#     metrics/spanmetrics:
#       receivers: [otlp/spanmetrics]
#       exporters: [prometheus]
